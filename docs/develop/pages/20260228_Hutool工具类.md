# Hutool工具类

> [官网](https://hutool.cn/) | [文档](https://www.hutool.cn/docs/#/)



​	　`Hutool`是一个小而全的Java工具类库，通过**静态方法**封装了许多常用的API，在`pom.xml`中引入如下依赖即可使用。

```xml
<dependency>
    <groupId>cn.hutool</groupId>
    <artifactId>hutool-all</artifactId>
    <version>5.8.43</version>
</dependency>
```





## 工具类

### StringUtils

### ListUtils

### JsonUtils

### DateUtils

```java
import cn.hutool.core.convert.Convert;
import cn.hutool.core.date.DatePattern;
import cn.hutool.core.date.DateUtil;
import cn.hutool.core.date.LocalDateTimeUtil;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.LocalTime;
import java.time.ZoneId;
import java.util.Date;

/**
 * 日期工具类
 */
public class DateUtils {

    /**
     * 格式化日期输出
     * @param time 需要格式化的时间类型
     */
    public static String format(Object time) {
        // LocalDateTime类型
        if(time instanceof LocalDateTime){
            return LocalDateTimeUtil.format(Convert.toLocalDateTime(time),DatePattern.NORM_DATETIME_PATTERN );
        }
        // LocalDate类型
        else if(time instanceof LocalDate){
            return LocalDateTimeUtil.format(Convert.toLocalDateTime(time), DatePattern.NORM_DATE_PATTERN );
        }
        // LocalTime类型
        else if(time instanceof LocalTime){
            return LocalDateTimeUtil.format(Convert.toLocalDateTime(time), DatePattern.NORM_TIME_PATTERN);
        }
        // Date类型
        else if(time instanceof Date){
            return DateUtil.format(Convert.toDate(time),DatePattern.NORM_DATETIME_PATTERN);
        }
        // 时间戳类型
        else if(time instanceof Long){
            LocalDateTime localDateTime = LocalDateTimeUtil.of(Convert.toLong(time), ZoneId.of("Asia/Shanghai"));
            return LocalDateTimeUtil.format(localDateTime, DatePattern.NORM_DATETIME_PATTERN );
        }
        return Convert.toStr(time);
    }
}
```



### BeanUtils



### ExcelUtils



### CacheUtils

```java

import cn.hutool.cache.CacheUtil;
import cn.hutool.cache.impl.TimedCache;

/** 
 * 缓存工具类
 * */
public class CacheUtils {

    private static final TimedCache<String, String> TIMED_CACHE = CacheUtil.newTimedCache(5000);

    static {
        /** 每5ms检查一次过期 */
        TIMED_CACHE.schedulePrune(5);
    }

    /**
     * 存入键值对，提供消逝时间
     *
     * @param key key值
     * @param value value值
     * @param timeout 失效时间
     */
    public static void put(String key, String value, Long timeout) {
        /** 设置消逝时间 */
        TIMED_CACHE.put(key, value, timeout);
    }

    /**
     * 键值对是否存在
     * @param key key值
     */
    public static boolean containsKey(String key) {
        if(TIMED_CACHE.size() <= 0){
            return false;
        }
        return TIMED_CACHE.containsKey(key);
    }

    /**
     * 每次重新get一次缓存，均会重新刷新消逝时间
     * @param key key值
     * @return key值对应的value值
     */
    public static String get(String key) {
        return TIMED_CACHE.get(key);
    }
}
```



## 测试

### DateUtilsTest

```java
import cn.hutool.core.lang.Assert;
import com.shooter.springboot.common.utils.DateUtils;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.LocalTime;
import java.util.Date;

@SpringBootTest
public class DateUtilsTest {

    @Test
    public void testDateUtils(){

        /**
         * 格式化日期输出
         * */
        LocalDateTime localDateTime = LocalDateTime.of(2026,1,1,1,1,1,1);
        Assert.equals(DateUtils.format(localDateTime),"2026-01-01 01:01:01");

        LocalDate localDate = LocalDate.of(2026,1,1);
        Assert.equals(DateUtils.format(localDate),"2026-01-01");

        LocalTime localTime = LocalTime.of(12,1,1);
        Assert.equals(DateUtils.format(localTime),"12:01:01");

        Date date = new Date(1767200461000L);
        Assert.equals(DateUtils.format(date),"2026-01-01 01:01:01");

        Assert.equals(DateUtils.format(1767200461000L),"2026-01-01 01:01:01");

    }

}
```

